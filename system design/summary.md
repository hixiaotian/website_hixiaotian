### 1. 概况

在系统设计的题目当中，当面试官简单描述完题目之后，我们需要先问一些问题来澄清题目的细节。

#### 第一步：澄清 requirements

requirements 分为两类：

- functional requirements：功能性需求，比如这个系统整体的功能能力。

举一个最简单的例子，Tiny URL:

Given a URL, our service should generate a shorter and unique alias of it. This is called a short link.

这些内容面试官只会简单描述几句话，并不会把功能展开来说（情况很少），那么我们就要从以下几个角度去思考关于功能扩展的问题（有先后重要性排序）：

0. 展开功能的细节，比如说有几种用户？每种用户的操作逻辑？这个功能是自动的还是手动的？
1. 某个功能有没有其他限制：时间限制？空间限制？性能限制？
2. 发生冲突时（并发请求）会怎么解决？
3. 无效输入时会怎么处理？

这类问题能够很好的展开这个功能的具体描述。

- non-functional requirements：非功能性需求，比如这个系统需要有哪些非功能性的特性， 在系统设计当中，有几个非常重要的非功能性需求需要我们去提问，如果不问会导致后面的技术选型出现很大的问题。

1. availability：可用性，这个系统需要有多少的可用性？99.99%？99.999%？
2. consistency：一致性，这个系统需要有多少的一致性？强一致性？弱一致性？
3. latency：延迟，这个系统的延迟要求是多少？毫秒级？微秒级？
4. scalability：可扩展性，这个系统的可扩展性要求是多少？每秒钟的请求量？每天的请求量？
5. reliability：可靠性，这个系统的可靠性要求是多少？每天的 downtime 是多少？

#### 第二步：数据计算

在澄清了 requirements 之后，我们需要计算数据的大小，这个数据的大小是非常重要的，有几个定理需要我们时刻记住：

1. 80-20 rule：80% 的数据来自于 20% 的用户，这个定理在系统设计当中非常重要，因为我们需要把这 20% 的用户放在第一位，这 20% 的用户的体验是最重要的。
2. write-heavy or read-heavy：这个系统是写多还是读多？这个问题非常重要，因为我们需要根据这个问题来决定我们的系统的架构。
3. storage vs memory：这个系统的数据是存储在磁盘上还是内存当中？这个问题非常重要，因为我们需要根据这个问题来决定我们的系统的架构。
4. hot spot：热点数据，这个系统的数据是否有热点？这个问题非常重要，因为我们需要根据这个问题来决定我们的系统的架构。
